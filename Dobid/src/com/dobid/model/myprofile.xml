<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd" >
<sqlMap namespace="myprofile">

	<typeAlias alias="auction_participantDTO" type="com.dobid.beans.Auction_participantDTO" />
	<typeAlias alias="auction_review2DTO" type="com.dobid.beans.Auction_reviewDTO" />
	<typeAlias alias="auctionDTO" type="com.dobid.beans.AuctionDTO" />
	<typeAlias alias="basketDTO" type="com.dobid.beans.BasketDTO" />
	<typeAlias alias="chargeDTO" type="com.dobid.beans.ChargeDTO" />
	<typeAlias alias="groupbuy_participantDTO" type="com.dobid.beans.Groupbuy_participantDTO" />
	<typeAlias alias="groupbuy_reviewDTO" type="com.dobid.beans.Groupbuy_reviewDTO" />
	<typeAlias alias="groupbuyDTO" type="com.dobid.beans.GroupbuyDTO" />
	<typeAlias alias="memberDTO" type="com.dobid.beans.MemberDTO" />
	<typeAlias alias="messageDTO" type="com.dobid.beans.MessageDTO" />
	<typeAlias alias="noticeboardDTO" type="com.dobid.beans.NoticeboardDTO" />
	<typeAlias alias="service_answerDTO" type="com.dobid.beans.Service_answerDTO" />
	<typeAlias alias="serviceDTO" type="com.dobid.beans.ServiceDTO" />
	<typeAlias alias="auction_myAuctionDTO" type="com.dobid.beans.Auction_myAuctionDTO"/>
	<typeAlias alias="chargelistDTO" type="com.dobid.beans.ChargelistDTO"/>
	<typeAlias alias="auction_ChargeDTO" type="com.dobid.beans.Auction_ChargeDTO"/>

	<select id="select" parameterClass="String" resultClass="memberDTO">
		select member_id, name,  pass,  phone,  email,  address, nickname,  introduction,  birthday, charging_amount
		from member
		where member_id=#member_id#
	</select>

	<update id="update" parameterClass="memberDTO">
	 	update member set member_id=#member_id#, name=#name#, pass=#pass#, phone=#phone#, email=#email#, address=#address#,
		nickname=#nickname#, introduction=#introduction#, birthday=#birthday#
	</update>
	
	<select id="basketSelect" parameterClass="String" resultClass="auctionDTO">
		select auction_board_num,main_image_path,title,highest_price,end_date,hot_check
		from auction a,basket b
		where a.auction_board_num=b.board_num and b.member_id=#member_id#
	</select>
	
	<select id="auctionSelect" parameterClass="String" resultClass="auction_myAuctionDTO">
		select auction_board_num,main_image_path,title,end_date,hot_check,dib_price_amount 
		from auction,auction_participanta
		where auction.auction_board_num=auction_participant.auction_board_num and basket.member_id=#member_id#
	</select>
	
	<select id="salesSelect" parameterClass="String" resultClass="auctionDTO">
		select auction_board_num,main_image_path,title,highest_price,end_date,hot_check
		from auction
		where seller_id=#seller_id#
	</select>
	
	<select id="chargeSelect" parameterClass="String" resultClass="chargeDTO">
		select charge_date,charge_will_amount,charge_type
		from charge
		where member_id=#member_id#
	</select> 
	<select id="usecharge" parameterClass="String" resultClass="auction_ChargeDTO">
		select end_date,highest_price,title
		from auction
		where sysdate>end_date and highest_price_id=#highest_price_id# 
	</select>
	
	<select id="qnaselect" parameterClass="String" resultClass="service_answerDTO">
		select title,categori,contents,upload_date,answer_cotents,answer_date
		from service_answer
		where member_id=#member_id#
	</select>
	
	<delete id="delete" parameterClass="String">
		delete from member
		where member_id=#member_id#
	</delete>
</sqlMap>








